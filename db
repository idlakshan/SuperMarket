DROP DATABASE IF EXISTS supermarket;
CREATE DATABASE IF NOT EXISTS supermarket;
SHOW DATABASES;

USE supermarket;

DROP TABLE IF EXISTS user;
CREATE TABLE IF NOT EXISTS user(

    user_id VARCHAR (45),
    name VARCHAR (45) NOT NULL,
    email TEXT NOT NULL,
    password VARCHAR (20)NOT NULL,
    CONSTRAINT PRIMARY KEY(user_id)

);

INSERT INTO USER VALUES('U001','Kamal','kamal@gmail.com','123');

SHOW TABLES;
DESC user;


DROP TABLE IF EXISTS customer;
CREATE TABLE IF NOT EXISTS Customer(
    id VARCHAR(15),
    name VARCHAR(45) NOT NULL DEFAULT 'Unknown',
    address TEXT,
    tp VARCHAR(12),
    CONSTRAINT PRIMARY KEY (id)
    );
SHOW TABLES ;
DESCRIBE customer;
#---------------------
DROP TABLE IF EXISTS `order`;
CREATE TABLE IF NOT EXISTS `order`(
    orderId VARCHAR(15),
    cId VARCHAR(15),
    orderDate DATE,
    time VARCHAR(15),
    cost DOUBLE,
    CONSTRAINT PRIMARY KEY (orderId),
    CONSTRAINT FOREIGN KEY (cId) REFERENCES customer(id) ON DELETE CASCADE ON UPDATE CASCADE
    );
SHOW TABLES ;
DESCRIBE `order`;
#-----------------------
DROP TABLE IF EXISTS item;
CREATE TABLE IF NOT EXISTS Item(
    code VARCHAR(15),
    name TEXT,
    qtyOnHand INT DEFAULT 0,
    unitPrice DOUBLE DEFAULT 0.00,
    CONSTRAINT PRIMARY KEY (code)
    );
SHOW TABLES ;
DESCRIBE item;
#------------------------
DROP TABLE IF EXISTS `order detail`;
CREATE TABLE IF NOT EXISTS `order detail`(
    itemCode VARCHAR(15),
    orderId VARCHAR(15),
    qty INT,
    price DOUBLE,
    CONSTRAINT PRIMARY KEY (itemCode, orderId),
    CONSTRAINT FOREIGN KEY (itemCode) REFERENCES item(code) ON DELETE CASCADE ON UPDATE CASCADE ,
    CONSTRAINT FOREIGN KEY (orderId) REFERENCES `order`(orderId) ON DELETE CASCADE ON UPDATE CASCADE
    );
SHOW TABLES ;
DESCRIBE `order detail`;
